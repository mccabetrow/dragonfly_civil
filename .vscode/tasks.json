{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "DB: Push",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/bootstrap.ps1",
        "-Mode",
        "push"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "DB: Preflight",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/preflight.ps1"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Preflight (Dev)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/preflight_dev.ps1"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Run config, security, doctor, and pytest checks against dev"
    },
    {
      "label": "Preflight (Prod)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/preflight_prod.ps1"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "âš ï¸ Full prod readiness check (config + security + doctor + pytest)"
    },
    {
      "label": "REST: Reload",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/bootstrap.ps1",
        "-Mode",
        "reload"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Smoke: View",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/bootstrap.ps1",
        "-Mode",
        "smoke"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Insert: Case",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "etl.src.collector_v1"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Insert: Composite",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "etl.src.collector_v1", "--composite"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Tests: PyTest",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "pytest", "-q"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "fmt",
      "type": "shell",
      "command": "powershell",
      "args": ["-NoProfile", "-Command", "make fmt"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "lint",
      "type": "shell",
      "command": "powershell",
      "args": ["-NoProfile", "-Command", "make lint"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "smoke",
      "type": "shell",
      "command": "powershell",
      "args": ["-NoProfile", "-Command", "make smoke"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "watcher",
      "type": "shell",
      "command": "powershell",
      "args": ["-NoProfile", "-Command", "make watcher"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Watcher: Once",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/run_watcher.ps1",
        "-Once"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Workers: Run",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/run_workers.ps1"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Doctor",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.doctor"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Doctor All",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.doctor_all", "--env", "prod"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Doctor: Intake & Enforcement",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.doctor_all", "--env", "dev"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Run intake + enforcement doctor checks against dev"
    },
    {
      "label": "Migration Status (Dev)",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.migration_status", "--env", "dev"],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Check migration status via REST API (no direct DB needed)"
    },
    {
      "label": "Migration Status (Prod)",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.migration_status", "--env", "prod"],
      "options": {
        "env": {
          "SUPABASE_MODE": "prod"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Check migration status via REST API (no direct DB needed)"
    },
    {
      "label": "DB Push (Dev)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "& ./scripts/db_push.ps1 -SupabaseEnv dev"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Apply Supabase migrations against the dev environment"
    },
    {
      "label": "DB Push (Prod)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "& ./scripts/db_push.ps1 -SupabaseEnv prod"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "prod"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "âš ï¸ Apply Supabase migrations against prod â€” double-check before running"
    },
    {
      "label": "Deploy (Prod)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/deploy_prod.ps1"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "âš ï¸ Full prod deploy (preflight + migrations + dashboard build)"
    },
    {
      "label": "Dad Go (Prod)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/dad_go.ps1"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Operator GO/NO-GO gate (health + go_live_gate + smoke + business checks)"
    },
    {
      "label": "Priority Pipeline Snapshot (Dev)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "./.venv/Scripts/python.exe -m tools.priority_pipeline --limit 20"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Inspect the top 20 dev judgments ranked by collectability + priority"
    },
    {
      "label": "Security Audit (Dev)",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.security_audit", "--env", "dev"],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Audit public schema RLS + grants in dev"
    },
    {
      "label": "Task Planner (Dev)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "./.venv/Scripts/python.exe -m tools.run_task_planner --env dev"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Schedule tier-based plaintiff tasks against dev"
    },
    {
      "label": "New Migration",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "Set-StrictMode -Version Latest; $ts = Get-Date -Format 'yyyyMMddHHmmss'; $file = Join-Path '${workspaceFolder.Replace('\\', '/')}/supabase/db/migrations' ($ts + '_temp.sql'); New-Item -Path $file -ItemType File -Force | Out-Null; code $file"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "never",
        "panel": "dedicated"
      }
    },
    {
      "label": "Importer: Simplicity (Dry Run)",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": [
        "-m",
        "tools.run_import",
        "--source",
        "simplicity",
        "--csv",
        "data_in/simplicity_sample.csv",
        "--batch-name",
        "dev-simplicity",
        "--source-reference",
        "dev-simplicity",
        "--skip-jobs",
        "--pretty"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Dry-run the Simplicity importer against data_in/simplicity_sample.csv"
    },
    {
      "label": "Importer: JBI (Dry Run)",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": [
        "-m",
        "tools.run_import",
        "--source",
        "jbi",
        "--csv",
        "data/jbi_export_valid_sample.csv",
        "--batch-name",
        "dev-jbi",
        "--source-reference",
        "dev-jbi",
        "--skip-jobs",
        "--pretty"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Dry-run the JBI importer against the included sample export"
    },
    {
      // Runs the Simplicity importer against dev using a user-provided file path.
      "label": "Simplicity Import (dev)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "$env:SUPABASE_MODE='dev'; & \"${workspaceFolder}\\.venv\\Scripts\\python.exe\" -m etl.simplicity_importer.import_simplicity \"${input:simplicityFile}\""
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Interactive dev import for Simplicity exports"
    },
    {
      "label": "Dry Run: 900 Plaintiffs",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": [
        "-m",
        "tools.dry_run_900",
        "--env",
        "dev",
        "--count",
        "900",
        "--reset"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Seed + simulate the 900 plaintiff dry run cohort in dev"
    },
    {
      "label": "Dev: Quick Checks",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "$ErrorActionPreference='Stop'; Set-Location '${workspaceFolder}'; $env:SUPABASE_MODE='dev'; ./scripts/db_push.ps1 -SupabaseEnv dev; ./.venv/Scripts/python.exe -m tools.check_schema_consistency --env dev; ./.venv/Scripts/python.exe -m tools.doctor_all --env dev"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "group": {
        "kind": "test",
        "isDefault": false
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Dev: Full Test Suite",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "$ErrorActionPreference='Stop'; Set-Location '${workspaceFolder}'; $env:SUPABASE_MODE='dev'; ./.venv/Scripts/python.exe -m pytest -q"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Dev: Build Dashboard",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "$ErrorActionPreference='Stop'; Set-Location '${workspaceFolder}/dragonfly-dashboard'; npm install; npm run build"
      ],
      "options": {
        "cwd": "${workspaceFolder}/dragonfly-dashboard"
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Dev: 900 Dry Run",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "$ErrorActionPreference='Stop'; Set-Location '${workspaceFolder}'; $env:SUPABASE_MODE='dev'; ./scripts/import_900_dry_run.ps1"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Prod: Preflight Promote",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-Command",
        "$ErrorActionPreference='Stop'; Set-Location '${workspaceFolder}'; ./scripts/preflight_promote_prod.ps1"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      }
    },
    {
      "label": "Prod Gate (Dev)",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.prod_gate", "--env", "dev"],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Run all 5 production gate checks against dev"
    },
    {
      "label": "Prod Gate (Prod)",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.prod_gate", "--env", "prod", "--strict"],
      "options": {
        "env": {
          "SUPABASE_MODE": "prod"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "âš ï¸ Run all 5 production gate checks against prod (strict mode)"
    },
    {
      "label": "Prod Gate (Dad)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/prod_gate.ps1",
        "-ProductionUrl",
        "${input:prodGateBaseUrl}"
      ],
      "options": {
        "cwd": "${workspaceFolder}",
        "env": {
          "SUPABASE_MODE": "prod"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Prompts for the prod gate URL (blank uses PROD_GATE_BASE_URL)"
    },

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸš€ DAD DEMO AUTOMATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Log Streaming Tasks (Individual Services)
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    {
      "label": "ğŸ”­ Logs: dragonfly-api",
      "type": "shell",
      "command": "railway",
      "args": ["logs", "-f", "--service", "dragonfly-api"],
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "logs"
      },
      "detail": "ğŸ“¡ Stream live logs from dragonfly-api"
    },
    {
      "label": "ğŸ”­ Logs: worker-ingest",
      "type": "shell",
      "command": "railway",
      "args": ["logs", "-f", "--service", "dragonfly-worker-ingest"],
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "logs"
      },
      "detail": "ğŸ“¡ Stream live logs from dragonfly-worker-ingest"
    },
    {
      "label": "ğŸ”­ Logs: worker-enforcement",
      "type": "shell",
      "command": "railway",
      "args": ["logs", "-f", "--service", "dragonfly-worker-enforcement"],
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "logs"
      },
      "detail": "ğŸ“¡ Stream live logs from dragonfly-worker-enforcement"
    },

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Compound Task: Monitor All Services
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    {
      "label": "ğŸ”­ Monitor All Services",
      "dependsOn": [
        "ğŸ”­ Logs: dragonfly-api",
        "ğŸ”­ Logs: worker-ingest",
        "ğŸ”­ Logs: worker-enforcement"
      ],
      "dependsOrder": "parallel",
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "logs"
      },
      "detail": "ğŸ“¡ Stream logs from API + Ingest + Enforcement in parallel"
    },

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Schema Cache Reload (PGRST002 Fix)
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    {
      "label": "ğŸ”„ PostgREST: Reload Schema",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.reload_postgrest"],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "demo"
      },
      "detail": "ğŸ”„ Fix PGRST002 errors by reloading PostgREST schema cache"
    },

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // Demo Run Tasks
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    {
      "label": "ğŸš€ Dad Demo: Full Run",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "${workspaceFolder}/scripts/auto_dad_demo.ps1"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "demo"
      },
      "detail": "ğŸ¯ One-click Dad Demo: Reset â†’ Browser â†’ Ingest â†’ Orchestrate"
    },
    {
      "label": "ğŸš€ Dad Demo: Reset Only",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "tools.reset_demo_state", "--force", "--env", "dev"],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "demo"
      },
      "detail": "âš ï¸ Truncate intake tables for fresh demo"
    },
    {
      "label": "ğŸš€ Dad Demo: Stream Railway Logs",
      "type": "shell",
      "command": "railway",
      "args": ["logs", "-f"],
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "group": "demo"
      },
      "detail": "ğŸ“¡ Stream live Railway backend logs (legacy single-stream)"
    },

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // ğŸš€ COMPOUND TASK: One-Click Launch
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    {
      "label": "ğŸš€ Launch Dad Demo",
      "dependsOn": ["ğŸ”­ Monitor All Services", "ğŸš€ Dad Demo: Full Run"],
      "dependsOrder": "parallel",
      "problemMatcher": [],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "detail": "ğŸ¯ One keystroke: Logs (3 services) + Reset + Browser + Ingest + Orchestrate"
    },

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // ğŸš€ GO-LIVE SEQUENCE
    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    {
      "label": "ğŸš€ Execute Go-Live Sequence",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/go_live_master.ps1"
      ],
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "focus": true,
        "clear": true
      },
      "detail": "âš ï¸ Full Go-Live: Preflight â†’ Migration â†’ Acceptance (with confirmation gates)"
    },
    {
      "label": "Golden Path (Dev)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/golden_path_dev.ps1"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "focus": true,
        "clear": true
      },
      "detail": "ğŸš¦ End-to-End pipeline validation: Ingest â†’ Process â†’ Score (dev)"
    },
    {
      "label": "Golden Path (Prod)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/golden_path_prod.ps1",
        "-Force"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "prod"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "focus": true,
        "clear": true
      },
      "detail": "âš ï¸ End-to-End pipeline validation: Ingest â†’ Process â†’ Score (PROD)"
    },
    {
      "label": "Go-Live Gate (Dev)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/certify_readiness.ps1",
        "-Env",
        "dev"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "focus": true,
        "clear": true
      },
      "detail": "Run full readiness certification against dev"
    },
    {
      "label": "Go-Live Gate (Prod)",
      "type": "shell",
      "command": "powershell",
      "args": [
        "-NoProfile",
        "-ExecutionPolicy",
        "Bypass",
        "-File",
        "scripts/certify_readiness.ps1",
        "-Env",
        "prod"
      ],
      "options": {
        "env": {
          "SUPABASE_MODE": "prod"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated",
        "focus": true,
        "clear": true
      },
      "detail": "âš ï¸ Full production Go-Live certification â€” final gate before plaintiff onboarding"
    },
    {
      "label": "Watchdog (Dev)",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "backend.monitors.watchdog", "--env", "dev", "--once"],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Run platform health check once against dev"
    },
    {
      "label": "Watchdog Loop (Dev)",
      "type": "shell",
      "command": "${workspaceFolder}\\.venv\\Scripts\\python.exe",
      "args": ["-m", "backend.monitors.watchdog", "--env", "dev"],
      "options": {
        "env": {
          "SUPABASE_MODE": "dev"
        }
      },
      "isBackground": true,
      "problemMatcher": [],
      "presentation": {
        "reveal": "always",
        "panel": "dedicated"
      },
      "detail": "Run continuous platform monitoring (60s interval)"
    }
  ],
  "inputs": [
    {
      "id": "simplicityFile",
      "type": "promptString",
      "description": "Path to Simplicity export CSV/JSON"
    },
    {
      "id": "prodGateBaseUrl",
      "type": "promptString",
      "description": "Production base URL for prod gate (leave blank to use PROD_GATE_BASE_URL)",
      "default": ""
    }
  ]
}
